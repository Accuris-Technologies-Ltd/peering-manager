{% extends '_base.html' %}
{% load helpers %}
{% block actions %}
{% if perms.peering.change_internetexchange %}
<a href="{% url 'peering:internetexchange_edit' slug=instance.slug %}" class="btn btn-warning">
  <i class="fas fa-edit"></i> Edit
</a>
{% endif %}
{% if perms.peering.delete_internetexchange %}
<a href="{% url 'peering:internetexchange_delete' slug=instance.slug %}" class="btn btn-danger">
  <i class="fas fa-trash"></i> Delete
</a>
{% endif %}
{% endblock %}
{% block breadcrumb %}
<li class="breadcrumb-item"><a href="{% url 'peering:internetexchange_list' %}">Internet Exchanges</a></li>
<li class="breadcrumb-item active" aria-current="page">{% block title %}{{ instance }}{% endblock %}</li>
{% endblock %}
{% block content %}
      {% if not instance.is_peeringdb_valid %}
      <div class="alert alert-danger" role="alert">
        <i class="fas fa-exclamation-triangle"></i> This Internet Exchange is linked to <a href="https://peeringdb.com/" class="alert-link">PeeringDB</a> but it seems that its record has been deleted. You can <a href="https://peeringdb.com/api/netixlan?id={{ instance.peeringdb_id }}" class="alert-link">check it</a> or <a href="https://peeringdb.com/api/netixlan?{% if instance.ipv6_address %}ipaddr6={{ instance.ipv6_address }}{% else %}ipaddr4={{ instance.ipv4_address }}{% endif %}" class="alert-link">look for the new ID</a>.<br/>
        <small>* This message will not disappear until you fixed the issue.</small>
      </div>
      {% endif %}
      <ul class="nav nav-tabs">
        <li class="nav-item">
          <a class="nav-link{% if request.path|notcontains:'/peering-sessions/,/peers/,/configuration/' %} active{% endif %}" href="{% url 'peering:internetexchange_details' slug=instance.slug %}">
            <i class="fas fa-info-circle"></i> Info
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link{% if request.path|contains:'/peering-sessions/' %} active{% endif %}" href="{% url 'peering:internetexchange_peering_sessions' slug=instance.slug %}">
            <i class="fas fa-network-wired"></i> Peering Sessions
          </a>
        </li>
        {% if instance.peeringdb_id %}
        <li class="nav-item">
          <a class="nav-link{% if request.path|contains:'/peers/' %} active{% endif %}" href="{% url 'peering:internetexchange_peers' slug=instance.slug %}?visible=true">
            <i class="fas fa-link"></i> Available Peers
          </a>
        </li>
        {% endif %}
        <li class="nav-item">
          <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">
            {% if instance.bgp_session_states_update %}
            Sessions last updated: {{ instance.bgp_session_states_update }}
            {% else %}
            Last updated: {{ instance.updated }}
            {% endif %}
          </a>
        </li>
      </ul>
      {% block subcontent %}{% endblock %}
{% endblock %}
